<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="index.css">
        <title>Галерея</title>
    </head>
    <body>
        <input type="radio" name="gallery-menu" id="img1" checked>
        <input type="radio" name="gallery-menu" id="img2">
        <input type="radio" name="gallery-menu" id="img3">
        <input type="radio" name="gallery-menu" id="img4">
        <main>
            <div class="gallery">
                <div class="nav">
                    <label for="img1" class="img1" index="0">Пальмы</label>
                    <label for="img2" class="img2" index="1">Дорога</label>
                    <label for="img3" class="img3" index="2">Баскетбол</label>
                    <label for="img4" class="img4" index="3">Зима</label>
                </div>
                <figure>
                    <img src="images/1.jpg" class="gallery-image img1">
                    <img src="images/2.jpg" class="gallery-image img2">
                    <img src="images/3.jpg" class="gallery-image img3">
                    <img src="images/4.jpg" class="gallery-image img4">
                </figure>
            </div>
        </main>
        <script type="text/javascript">
            var gallery = document.querySelector('.gallery');
            Object.defineProperty(gallery, 'interval', {
                value: null,
                configurable: false,
                enumerable: false,
                writable: true
            });
            Object.defineProperty(gallery, 'choices', {
                value: document.getElementsByTagName('input'),
                configurable: false,
                enumerable: false,
                writable: false
            });
            Object.defineProperty(gallery, 'index', {
                value: 0,
                configurable: false,
                enumerable: false,
                writable: true
            });
            Object.defineProperty(gallery, 'start', {
                value: function (index) {
                    this.index = index;
                    this.interval = setInterval(function () {
                        if (this.index >= this.choices.length) {
                            this.index = 0;
                        }
                        var choice = this.choices[this.index++];
                        choice.checked = true;
                    }.bind(this), 5000)
                },
                configurable: false,
                enumerable: false,
                writable: false
            });
            Object.defineProperty(gallery, 'stop', {
                value: function () {
                    clearInterval(this.interval);
                },
                configurable: false,
                enumerable: false,
                writable: false
            });
            gallery.start(0);
            gallery.addEventListener('click', function (event) {
                if (event.target.tagName === 'LABEL') {
                    gallery.stop();
                    var newIndex = parseInt(event.target.getAttribute('index')) + 1;
                    gallery.start(newIndex);
                }
            }, false);
            var navBlock = document.querySelector('.nav');
            Object.defineProperty(navBlock, 'setHeight', {
                value: function () {
                    this.style.height = '0';
                    this.style.height = gallery.clientHeight.toString()+'px';
                },
                configurable: false,
                enumerable: false,
                writable: false
            });
            window.addEventListener('resize', function (event) {
                navBlock.setHeight();
            }, true);
            window.addEventListener('load', function (event) {
                navBlock.setHeight();
            }, true);
        </script>
    </body>
</html>
